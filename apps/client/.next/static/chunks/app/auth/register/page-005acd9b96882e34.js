(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{9842:function(e,t,s){Promise.resolve().then(s.bind(s,1603))},1603:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(7437),a=s(2265),n=s(7648),l=s(9501),i=s(3590),c=s(7119),o=s(6502),m=s(2548),d=s(1245);let u=c.Ry({first_name:c.Z_().min(2,"First name must be at least 2 characters"),last_name:c.Z_().min(2,"Last name must be at least 2 characters"),email:c.Z_().email("Please enter a valid email address"),password:c.Z_().min(8,"Password must be at least 8 characters"),confirmPassword:c.Z_(),company_name:c.Z_().min(2,"Company name must be at least 2 characters"),acceptTerms:c.O7().refine(e=>!0===e,{message:"You must accept the terms and conditions"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function h(){let[e,t]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),{register:h,isLoading:x}=(0,d.aC)(),{register:p,handleSubmit:f,formState:{errors:g}}=(0,l.cI)({resolver:(0,i.F)(u)}),j=async e=>{try{let{confirmPassword:t,acceptTerms:s,...r}=e;await h(r)}catch(e){}};return(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-neutral-900",children:"Create your account"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-neutral-600",children:"Join AgroMart and start managing your inventory professionally"})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("form",{className:"space-y-6",onSubmit:f(j),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"company_name",className:"block text-sm font-medium text-neutral-700",children:"Company Name"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{...p("company_name"),type:"text",className:"form-input",placeholder:"Enter your company name"}),g.company_name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.company_name.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-neutral-700",children:"First Name"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{...p("first_name"),type:"text",className:"form-input",placeholder:"First name"}),g.first_name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.first_name.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-neutral-700",children:"Last Name"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{...p("last_name"),type:"text",className:"form-input",placeholder:"Last name"}),g.last_name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.last_name.message})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700",children:"Email Address"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{...p("email"),type:"email",autoComplete:"email",className:"form-input",placeholder:"Enter your email"}),g.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.email.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{...p("password"),type:e?"text":"password",autoComplete:"new-password",className:"form-input pr-10",placeholder:"Create a password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,r.jsx)(o.Z,{className:"h-5 w-5 text-neutral-400"}):(0,r.jsx)(m.Z,{className:"h-5 w-5 text-neutral-400"})}),g.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.password.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-neutral-700",children:"Confirm Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{...p("confirmPassword"),type:s?"text":"password",autoComplete:"new-password",className:"form-input pr-10",placeholder:"Confirm your password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!s),children:s?(0,r.jsx)(o.Z,{className:"h-5 w-5 text-neutral-400"}):(0,r.jsx)(m.Z,{className:"h-5 w-5 text-neutral-400"})}),g.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:g.confirmPassword.message})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{...p("acceptTerms"),id:"acceptTerms",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"}),(0,r.jsxs)("label",{htmlFor:"acceptTerms",className:"ml-2 block text-sm text-neutral-900",children:["I agree to the"," ",(0,r.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Terms and Conditions"})," ","and"," ",(0,r.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})]}),g.acceptTerms&&(0,r.jsx)("p",{className:"text-sm text-error-600",children:g.acceptTerms.message}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:x,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:["Already have an account?"," ",(0,r.jsx)(n.default,{href:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in here"})]})})]})})]})}),(0,r.jsx)("div",{className:"hidden lg:block relative w-0 flex-1",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Join AgroMart"}),(0,r.jsx)("p",{className:"text-primary-100 text-lg",children:"Start your inventory management journey"})]}),(0,r.jsxs)("div",{className:"space-y-4 text-left max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Quick Setup"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Get started in minutes with our guided setup process"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Secure & Reliable"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Enterprise-grade security with 99.9% uptime guarantee"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"24/7 Support"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Get help whenever you need it with our dedicated support team"})]})]})]})]})})})]})}},1245:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return o},QO:function(){return d},TE:function(){return u},aC:function(){return m}});var r=s(7437),a=s(2265),n=s(9376),l=s(9064),i=s(1837);let c=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[m,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),x=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=(0,i.bW)();if(e){d(e);try{let e=await i.x1.auth.me();e.success?o(e.data):((0,i.yE)(),d(null))}catch(e){(0,i.yE)(),d(null)}}h(!1)})()},[]);let p=async(e,t)=>{try{h(!0);let s=await i.x1.auth.login(e,t);if(s.success){let{user:e,token:t,refresh_token:r}=s.data;(0,i.uB)(t),(0,i.zI)(r),o(e),d(t),l.Am.success("Login successful!"),x.push("/dashboard")}else throw Error(s.message||"Login failed")}catch(t){var s,r;let e=(null===(r=t.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||t.message||"Login failed";throw l.Am.error(e),t}finally{h(!1)}},f=async e=>{try{h(!0);let t=await i.x1.auth.register(e);if(t.success){let{user:e,token:s,refresh_token:r}=t.data;(0,i.uB)(s),(0,i.zI)(r),o(e),d(s),l.Am.success("Registration successful!"),x.push("/dashboard")}else throw Error(t.message||"Registration failed")}catch(r){var t,s;let e=(null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||r.message||"Registration failed";throw l.Am.error(e),r}finally{h(!1)}},g=async()=>{try{await i.x1.auth.logout()}catch(e){}finally{(0,i.yE)(),o(null),d(null),l.Am.success("Logged out successfully"),x.push("/auth/login")}};return(0,r.jsx)(c.Provider,{value:{user:s,token:m,login:p,register:f,logout:g,isLoading:u,isAuthenticated:!!s&&!!m},children:t})}function m(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){return function(t){let{isAuthenticated:s,isLoading:l}=m(),i=(0,n.useRouter)();return((0,a.useEffect)(()=>{l||s||i.push("/auth/login")},[s,l,i]),l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s?(0,r.jsx)(e,{...t}):null}}function u(){let{user:e}=m(),t=t=>(null==e?void 0:e.role)===t,s=t=>t.includes((null==e?void 0:e.role)||"");return{user:e,hasRole:t,hasAnyRole:s,isAdmin:()=>t("admin"),isManager:()=>t("manager"),isUser:()=>t("user"),canManageProducts:()=>s(["admin","manager"]),canManageInventory:()=>s(["admin","manager","user"]),canViewReports:()=>s(["admin","manager"]),canManageUsers:()=>t("admin")}}},1837:function(e,t,s){"use strict";s.d(t,{bW:function(){return m},uB:function(){return c},x1:function(){return i},yE:function(){return d},zI:function(){return o}});var r=s(3464),a=s(4131),n=s(9064);let l=r.Z.create({baseURL:"http://localhost:8080/api",timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=a.Z.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{if(e.response){let{status:t,data:s}=e.response;switch(t){case 401:a.Z.remove("auth_token"),a.Z.remove("refresh_token"),window.location.href="/auth/login";break;case 403:n.Am.error("Access denied. You do not have permission to perform this action.");break;case 429:n.Am.error("Too many requests. Please try again later.");break;case 500:n.Am.error("Server error. Please try again later.");break;default:s&&"object"==typeof s&&"message"in s?n.Am.error(s.message):n.Am.error("An unexpected error occurred.")}}else e.request?n.Am.error("Network error. Please check your connection."):n.Am.error("An unexpected error occurred.");return Promise.reject(e)});let i={get:(e,t)=>l.get(e,{params:t}).then(e=>e.data),post:(e,t)=>l.post(e,t).then(e=>e.data),put:(e,t)=>l.put(e,t).then(e=>e.data),patch:(e,t)=>l.patch(e,t).then(e=>e.data),delete:e=>l.delete(e).then(e=>e.data),auth:{login:(e,t)=>i.post("/auth/login",{email:e,password:t}),register:e=>i.post("/auth/register",e),logout:()=>i.post("/auth/logout"),me:()=>i.get("/auth/me"),refreshToken:e=>i.post("/auth/refresh",{refresh_token:e})},products:{list:e=>i.get("/products",e),get:e=>i.get("/products/".concat(e)),create:e=>i.post("/products",e),update:(e,t)=>i.patch("/products/".concat(e),t),delete:e=>i.delete("/products/".concat(e)),search:e=>i.get("/products/search?q=".concat(e))},units:{list:()=>i.get("/units"),create:e=>i.post("/units",e),update:(e,t)=>i.put("/units/".concat(e),t),delete:e=>i.delete("/units/".concat(e))},inventory:{list:e=>i.get("/inventory",e),getByProduct:e=>i.get("/inventory/product/".concat(e)),add:e=>i.post("/inventory/add",e),reduce:e=>i.post("/inventory/reduce",e),getLogs:e=>i.get("/inventory/logs",e)},batches:{create:e=>i.post("/batches",e),get:e=>i.get("/batches/".concat(e)),update:(e,t)=>i.put("/batches/".concat(e),t)},reports:{lowStock:e=>i.get("/reports/low-stock",{threshold:e}),expiringBatches:e=>i.get("/reports/expiring-batches",{days:e}),inventoryValue:()=>i.get("/reports/inventory-value"),dashboardStats:()=>i.get("/reports/dashboard-stats")}},c=e=>{a.Z.set("auth_token",e,{expires:7})},o=e=>{a.Z.set("refresh_token",e,{expires:30})},m=()=>a.Z.get("auth_token"),d=()=>{a.Z.remove("auth_token"),a.Z.remove("refresh_token")}}},function(e){e.O(0,[610,648,390,971,117,744],function(){return e(e.s=9842)}),_N_E=e.O()}]);