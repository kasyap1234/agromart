(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{4084:function(e,t,s){Promise.resolve().then(s.bind(s,1202))},1202:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(7437),a=s(2265),n=s(7648),l=s(9501),i=s(3590),o=s(7119),c=s(6502),d=s(2548),u=s(1245);let m=o.Ry({email:o.Z_().email("Please enter a valid email address"),password:o.Z_().min(6,"Password must be at least 6 characters")});function h(){let[e,t]=(0,a.useState)(!1),{login:s,isLoading:o}=(0,u.aC)(),{register:h,handleSubmit:x,formState:{errors:p}}=(0,l.cI)({resolver:(0,i.F)(m)}),f=async e=>{try{await s(e.email,e.password)}catch(e){}};return(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-neutral-900",children:"Welcome to AgroMart"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-neutral-600",children:"Professional inventory management for agro-tech companies"})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("form",{className:"space-y-6",onSubmit:x(f),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700",children:"Email address"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("input",{...h("email"),type:"email",autoComplete:"email",className:"form-input",placeholder:"Enter your email"}),p.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.email.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{...h("password"),type:e?"text":"password",autoComplete:"current-password",className:"form-input pr-10",placeholder:"Enter your password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,r.jsx)(c.Z,{className:"h-5 w-5 text-neutral-400"}):(0,r.jsx)(d.Z,{className:"h-5 w-5 text-neutral-400"})}),p.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.password.message})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-neutral-900",children:"Remember me"})]}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:o,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:["Don't have an account?"," ",(0,r.jsx)(n.default,{href:"/auth/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up now"})]})})]})})]})}),(0,r.jsx)("div",{className:"hidden lg:block relative w-0 flex-1",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"AgroMart"}),(0,r.jsx)("p",{className:"text-primary-100 text-lg",children:"Inventory Management System"})]}),(0,r.jsxs)("div",{className:"space-y-4 text-left max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Real-time Inventory Tracking"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Monitor your agricultural products and supplies in real-time"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Multi-tenant Architecture"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Secure, isolated environments for each organization"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-primary-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Advanced Analytics"}),(0,r.jsx)("p",{className:"text-primary-100 text-sm",children:"Get insights with comprehensive reports and dashboards"})]})]})]})]})})})]})}},1245:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},QO:function(){return u},TE:function(){return m},aC:function(){return d}});var r=s(7437),a=s(2265),n=s(9376),l=s(9064),i=s(1837);let o=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),x=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=(0,i.bW)();if(e){u(e);try{let e=await i.x1.auth.me();e.success?c(e.data):((0,i.yE)(),u(null))}catch(e){(0,i.yE)(),u(null)}}h(!1)})()},[]);let p=async(e,t)=>{try{h(!0);let s=await i.x1.auth.login(e,t);if(s.success){let{user:e,token:t,refresh_token:r}=s.data;(0,i.uB)(t),(0,i.zI)(r),c(e),u(t),l.Am.success("Login successful!"),x.push("/dashboard")}else throw Error(s.message||"Login failed")}catch(t){var s,r;let e=(null===(r=t.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||t.message||"Login failed";throw l.Am.error(e),t}finally{h(!1)}},f=async e=>{try{h(!0);let t=await i.x1.auth.register(e);if(t.success){let{user:e,token:s,refresh_token:r}=t.data;(0,i.uB)(s),(0,i.zI)(r),c(e),u(s),l.Am.success("Registration successful!"),x.push("/dashboard")}else throw Error(t.message||"Registration failed")}catch(r){var t,s;let e=(null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||r.message||"Registration failed";throw l.Am.error(e),r}finally{h(!1)}},g=async()=>{try{await i.x1.auth.logout()}catch(e){}finally{(0,i.yE)(),c(null),u(null),l.Am.success("Logged out successfully"),x.push("/auth/login")}};return(0,r.jsx)(o.Provider,{value:{user:s,token:d,login:p,register:f,logout:g,isLoading:m,isAuthenticated:!!s&&!!d},children:t})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){return function(t){let{isAuthenticated:s,isLoading:l}=d(),i=(0,n.useRouter)();return((0,a.useEffect)(()=>{l||s||i.push("/auth/login")},[s,l,i]),l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s?(0,r.jsx)(e,{...t}):null}}function m(){let{user:e}=d(),t=t=>(null==e?void 0:e.role)===t,s=t=>t.includes((null==e?void 0:e.role)||"");return{user:e,hasRole:t,hasAnyRole:s,isAdmin:()=>t("admin"),isManager:()=>t("manager"),isUser:()=>t("user"),canManageProducts:()=>s(["admin","manager"]),canManageInventory:()=>s(["admin","manager","user"]),canViewReports:()=>s(["admin","manager"]),canManageUsers:()=>t("admin")}}},1837:function(e,t,s){"use strict";s.d(t,{bW:function(){return d},uB:function(){return o},x1:function(){return i},yE:function(){return u},zI:function(){return c}});var r=s(3464),a=s(4131),n=s(9064);let l=r.Z.create({baseURL:"http://localhost:8080/api",timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=a.Z.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{if(e.response){let{status:t,data:s}=e.response;switch(t){case 401:a.Z.remove("auth_token"),a.Z.remove("refresh_token"),window.location.href="/auth/login";break;case 403:n.Am.error("Access denied. You do not have permission to perform this action.");break;case 429:n.Am.error("Too many requests. Please try again later.");break;case 500:n.Am.error("Server error. Please try again later.");break;default:s&&"object"==typeof s&&"message"in s?n.Am.error(s.message):n.Am.error("An unexpected error occurred.")}}else e.request?n.Am.error("Network error. Please check your connection."):n.Am.error("An unexpected error occurred.");return Promise.reject(e)});let i={get:(e,t)=>l.get(e,{params:t}).then(e=>e.data),post:(e,t)=>l.post(e,t).then(e=>e.data),put:(e,t)=>l.put(e,t).then(e=>e.data),patch:(e,t)=>l.patch(e,t).then(e=>e.data),delete:e=>l.delete(e).then(e=>e.data),auth:{login:(e,t)=>i.post("/auth/login",{email:e,password:t}),register:e=>i.post("/auth/register",e),logout:()=>i.post("/auth/logout"),me:()=>i.get("/auth/me"),refreshToken:e=>i.post("/auth/refresh",{refresh_token:e})},products:{list:e=>i.get("/products",e),get:e=>i.get("/products/".concat(e)),create:e=>i.post("/products",e),update:(e,t)=>i.patch("/products/".concat(e),t),delete:e=>i.delete("/products/".concat(e)),search:e=>i.get("/products/search?q=".concat(e))},units:{list:()=>i.get("/units"),create:e=>i.post("/units",e),update:(e,t)=>i.put("/units/".concat(e),t),delete:e=>i.delete("/units/".concat(e))},inventory:{list:e=>i.get("/inventory",e),getByProduct:e=>i.get("/inventory/product/".concat(e)),add:e=>i.post("/inventory/add",e),reduce:e=>i.post("/inventory/reduce",e),getLogs:e=>i.get("/inventory/logs",e)},batches:{create:e=>i.post("/batches",e),get:e=>i.get("/batches/".concat(e)),update:(e,t)=>i.put("/batches/".concat(e),t)},reports:{lowStock:e=>i.get("/reports/low-stock",{threshold:e}),expiringBatches:e=>i.get("/reports/expiring-batches",{days:e}),inventoryValue:()=>i.get("/reports/inventory-value"),dashboardStats:()=>i.get("/reports/dashboard-stats")}},o=e=>{a.Z.set("auth_token",e,{expires:7})},c=e=>{a.Z.set("refresh_token",e,{expires:30})},d=()=>a.Z.get("auth_token"),u=()=>{a.Z.remove("auth_token"),a.Z.remove("refresh_token")}}},function(e){e.O(0,[610,648,390,971,117,744],function(){return e(e.s=4084)}),_N_E=e.O()}]);